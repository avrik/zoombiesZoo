<tile-buy-popup *ngIf="showStore && tile.card" [items]="storeItems2" (buyItem)="buyItem($event)" [title]="tile.card.family.label+' lvl '+(tile.card.level+1)"></tile-buy-popup>
<tile-buy-popup *ngIf="showStore && !tile.card" [items]="storeItems" (buyItem)="buyItem($event)" [title]="'city improvments'"></tile-buy-popup>


<div (click)="clickTile()">
    <!-- <div style="position:absolute" [@collect]="collectState">
        <img src="assets/resources/lumber1.png" alt="" height="40">
    </div> -->

    <div style="position:absolute;padding-left:8px" [style.z-index]="getIndex()">
        <div class="card-float" [@floatOver]="state" *ngIf="!tile.card && tile.overMe && currentCard" [style.opacity]="isSelectd?0.5:1">
            <app-tile-card [card]="currentCard"></app-tile-card>
        </div>

        <div>
            <app-tile-card *ngIf="tile.card" [placed]="true" [card]="tile.card" [onTerrain]="tile.terrain.type" (collected)="onCardCollected()"></app-tile-card>
        </div>


        <div *ngIf="showThinkBubble" style="position:absolute;margin-top:-30px;margin-left:30px">
            <img src="assets/people/SpeechBubble.png" alt="" height="64">
            <img style="position:fixed;;margin-top:-45px;margin-left:-15px" src="assets/buildings/house.png" alt="" height="35">
        </div>
    </div>


    <!-- /TERRAIN -->
    <!-- <div class="tile" *ngIf="tile" (mouseover)="overMe()" (mouseout)="outMe()"> -->
    <div class="tile" *ngIf="tile" (mouseover)="onMouseOver()" (mouseout)="outMe()">
        <div class="over" *ngIf="tile.terrain?.clickable && !tile.card"></div>


        <div class="terrain">
            <!-- <img *ngIf="tile.building" [src]="tile.building.url" alt="" width="64"> -->
            <img [src]="tile.terrainTop?tile.terrainTop.url:tile.terrain.url" alt="" width="64">
        </div>
    </div>
</div>