<div *ngIf="tile && tile.terrain" [@tileAnimation]="tileAnimation" (click)="clickTile()" [style.opacity]="getTileOpacity()" [style.pointer-events]="getTilePointer()">

    <div *ngIf="!tile.terrain.locked" style="position:absolute">

        <!--  <div *ngIf="tile.movment" [@moveAnimation]="tile.movment.dir" (@moveAnimation.done)="onMoveDone($event)">
            <img [src]="tile.movment.img" alt="" height="80">
        </div> -->

        <!-- over img -->
        <div *ngIf="isShowOver" style="opacity:0.4;margin-top:-10px">
            <app-tile-card [card]="currentCard"></app-tile-card>
        </div>

        <!-- <div class="card-float" [@floatOver]="floatState" (@floatOver.done)="onFloatDone($event)" *ngIf="isCardFloating">
            <app-tile-card [card]="currentCard"></app-tile-card>
        </div> -->


        <!-- <div #cardRef *ngIf="gotCard==true" [@visibilityChanged]="tile.showDelay"> -->
        <div #cardRef *ngIf="isShowCardOnTile">
            <app-tile-card [card]="tile.card" [onTerrain]="tile.terrain.type" [onMe]="onMe"></app-tile-card>
        </div>
    </div>


    <!-- /TERRAIN -->
    <!-- <small style="position: absolute;margin-top:20px;opacity:0.2">{{tile.id}}</small> -->
    <div [style.margin]="gettilemargin()" class="tile" (mouseover)="onMouseOver()" (mouseout)="onMouseOut()" (mouseup)="onMouseOut()" (mousedown)="onMouseOver()">
        <div class="over" *ngIf="tile.terrain?.clickable && gotCard==false"></div>
        <img style="position: absolute;z-index:1000;margin:10px 0 0 -5px;opacity:0.1" *ngIf="tile.terrain.locked" src="assets/lock.png" alt="" height="30">
        <div *ngIf="tile.terrain" [class]="tile.terrain.locked?'terrain locked':'terrain'">
            <img [src]="terrainImg" alt="" width="100">
        </div>
    </div>
</div>